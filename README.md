# PennPals

## User IDs and Nicknames
The ServerBackend class is the base layer of the server, which handles network connections with various clients. When a client connects to the server for the first time, the ServerBackend generates a unique integer ID to represent the open connection with the client. (There are no guarantees about these integers’ values beyond uniqueness.) Because chatting with other clients based on their ID number is confusing, we will allow clients to have nicknames which are used within the application. Unlike user IDs, which cannot change as long as the client is connected to the server, clients can change their nicknames at any time.

## Channels and Owners
The server does not serve as one giant chat room for all connected users. Instead, this protocol is modeled around the idea of channels, or groupings of users on the server. The server has multiple channels, and a client may be in any number of channels (or in none). Any user who opts to join the discussion in a channel will receive all messages and commands that are directed to that channel after they join. At any point a user can also leave a channel, and will then stop receiving messages and commands.

The user that created a channel is designated as that channel’s owner. The owner of a channel may kick other users from the channel. If the channel is invite-only, the owner of the channel must add other users by sending an InviteCommand. For the sake of simplicity, the owner of a channel cannot be changed; a channel is removed if its owner leaves.

## Chat Protocol

The PennPals protocol is modeled around a set of commands which can be sent to the server from a client, who is known as the sender of the command. Some commands also include a target user, who is the object of an action that the sender wishes the server to perform.

Below is a general summary of each of the commands that can be issued by a client:

### Command	Effect
- NicknameCommand:	Changes the sender’s nickname.
- CreateCommand:	Creates a new channel with the sender as its owner.
- JoinCommand:	Adds the sender to a public channel.
- InviteCommand:	Invites the target user to a private channel owned by the sender.
- MessageCommand:	Delivers a message to all users in a channel.
- LeaveCommand:	Removes the sender from a channel.
- KickCommand:	Removes the target user from a private channel.

### How Commands are Represented
The server and client communicate using a text-based protocol, where commands are encoded as strings and transmitted as a stream of characters. When the server recieves a command string from a client, it uses the CommandParser class to convert the string into a corresponding Command object.


All of the possible protocol commands are subtypes of the abstract class Command . Since Command is abstract, it cannot be directly instantiated. Unlike an interface, however, the abstract class defines some fields and methods which are inherited by its concrete subclasses.

Command is designed to be extended by classes representing each of the different commands defined by the protocol. Every instance of Command has implementations for at least the following methods:

- int getSenderId()
- String getSender()
- Broadcast updateServerModel(ServerModel model)

The updateServerModel method is marked abstract in the definition of Command, meaning that each subclass must have its own implementation of that method. This allows the server backend, regardless of the command’s dynamic class, to call updateServerModel and rely on dynamic dispatch to achieve the appropriate behavior.


The ServerModel is the component responsible for processing each Command that is generated by the parser, and for keeping track of the server state. 
